#summary Sending metrics

== Introduction ==

Sending metric needs to be easy.  That's the premise we set out when we were designing the solution.  After ops install the box, anyone should be able to start sending metric by looking an example.  We made the choice of creating a port listening daemon to accept metric so other app/script is MQ unaware.  This way, all they need is to connect to a port and send those [MetricFormat metrics].

== Details ==

We send our metrics in two ways:
 # Send via local daemon, MQ independent.
 # Send using RabbitMQ library to send directly to message exchange.

=== Send via local daemon ===

Create a daemon to listen for metric string and forward it to configured RabbitMQ server and exchange.  Admob has released an implementation written in Python.  You can check it out from launchpad

bzr = bazaar source control
{{{
bzr branch lp:~zirpu/graphite/admob.branch
cd admob.branch/graphite_local_proxy
make pkg
dpkg -i ../graphite-local-proxy_1.0.0-0_all.deb
}}}

You'll need to edit /etc/default/graphite_local_proxy for rabbitmq server, vhost, exchange, and etc.  

=== Send using RabbitMQ client ===

Many language has a client library, check this [http://www.rabbitmq.com/how.html Rabbitmq page] for detail info. 
